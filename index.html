<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>色彩製造機</title>
    <style>
        * {
            margin: 5px;
        }
    </style>
</head>

<body>
    <div id="targetarea" style="width: 200px; height: 200px;display:flex;justify-content:center;align-items: center;">
        <span id="colornumber" style="color:black"></span></div>
    <hr>

    <input type="button" value="隨機出色" onclick="makeitrandom()"><br>
    <input type="button" id="red" value="R" onclick="red()">
    <input id="rangeRed" type="range" min="0" max="255"><br>
    <input type="button" id="green" value="G" onclick="green()">
    <input id="rangeGreen" type="range" min="0" max="255"><br>
    <input type="button" id="blue" value="B" onclick="blue()">
    <input id="rangeBlue" type="range" min="0" max="255"><br>
    <input type="button" value="+" onmousedown="timer=setInterval(alladd, 30);" onmouseup="clearInterval(timer)">
    <input type="button" value="-" onmousedown="timer=setInterval(allminus, 30);" onmouseup="clearInterval(timer)">





    <script>
        // 先設定目標區域的ID抓取
        let thetarget = document.getElementById('targetarea');

        // 設定0~255隨機數字的生成
        function GetRandom(min, max) {
            return Math.floor(Math.random() * max + 1) + min;
        }

        // 設定RGB三原色的隨機數字
        let RandomRed = GetRandom(0, 255);
        let RandomGreen = GetRandom(0, 255);
        let RandomBlue = GetRandom(0, 255);
        let antiRed = 255 - RandomRed;
        let antiGreen = 255 - RandomGreen;
        let antiBlue = 255 - RandomBlue;
        let rangeRed = document.getElementById("rangeRed");
        let rangeGreen = document.getElementById("rangeGreen");
        let rangeBlue = document.getElementById("rangeBlue");
        rangeRed.value = RandomRed;
        rangeGreen.value = RandomGreen
        rangeBlue.value = RandomBlue;

        // 主要區域的顯示顏色
        thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
        document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
        document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)

        function makeitrandom() {
            RandomRed = GetRandom(0, 255);
            RandomGreen = GetRandom(0, 255);
            RandomBlue = GetRandom(0, 255);
            antiRed = 255 - RandomRed;
            antiGreen = 255 - RandomGreen;
            antiBlue = 255 - RandomBlue;
            thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
            rangeRed.value = RandomRed;
            rangeGreen.value = RandomGreen
            rangeBlue.value = RandomBlue;
        }


        function red() {
            RandomRed = prompt('請輸入 0-255 紅色的號碼', `${RandomRed}`);
            if (RandomRed == null || RandomRed < 0 || RandomRed > 255) {
                red();
            } else {
                thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
                rangeRed.value = RandomRed;
            }
        }

        function green() {
            RandomGreen = prompt('請輸入 0-255 紅色的號碼', `${RandomGreen}`);
            if (RandomGreen == null || RandomGreen < 0 || RandomGreen > 255) {
                green();
            } else {

                thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
                rangeGreen.value = RandomGreen
            }
        }

        function blue() {
            RandomBlue = prompt('請輸入 0-255 紅色的號碼', `${RandomBlue}`);
            if (RandomBlue == null || RandomBlue < 0 || RandomBlue > 255) {
                blue();
            } else {

                thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
                document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
                rangeBlue.value = RandomBlue;
            }
        }
        function colorchange() {
            RandomRed = rangeRed.value;
            RandomGreen = rangeGreen.value;
            RandomBlue = rangeBlue.value;
            thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
        }
        document.getElementById('rangeRed').addEventListener('input', colorchange);
        document.getElementById('rangeGreen').addEventListener('input', colorchange);
        document.getElementById('rangeBlue').addEventListener('input', colorchange);

        function alladd() {
            RandomRed += 1;
            RandomGreen += 1;
            RandomBlue += 1;
            if (RandomRed >= 255) {
                RandomRed = 255;
            }
            if (RandomGreen >= 255) {
                RandomGreen = 255;
            }
            if (RandomBlue >= 255) {
                RandomBlue = 255;
            }
            thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
            rangeRed.value = RandomRed
            rangeGreen.value = RandomGreen
            rangeBlue.value = RandomBlue
        }

        function allminus() {
            RandomRed -= 1;
            RandomGreen -= 1;
            RandomBlue -= 1;
            if (RandomRed <= 0) {
                RandomRed = 0;
            }
            if (RandomGreen <= 0) {
                RandomGreen = 0;
            }
            if (RandomBlue <= 0) {
                RandomBlue = 0;
            }
            thetarget.style.backgroundColor = `rgb(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").textContent = `RGB(${RandomRed}, ${RandomGreen}, ${RandomBlue})`;
            document.getElementById("colornumber").setAttribute('style', `color:rgb(${antiRed}, ${antiGreen}, ${antiBlue})`)
            rangeRed.value = RandomRed
            rangeGreen.value = RandomGreen
            rangeBlue.value = RandomBlue
        }

    </script>
</body>

</html>